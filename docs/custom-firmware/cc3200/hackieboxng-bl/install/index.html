<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Start and read!"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content="Installation"><meta property="og:description" content="Start and read!"><meta property="og:type" content="article"><meta property="og:url" content="https://tonies-wiki.revvox.de/docs/custom-firmware/cc3200/hackieboxng-bl/install/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2024-01-09T11:37:56+00:00"><title>Installation | Toniebox Hacking</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=stylesheet href=/book.min.e2994ec3dc0cc7d1d85b138ad4e4c3f02d8abfa8b8471dfe0ab15a7a8a77d6ee.css integrity="sha256-4plOw9wMx9HYWxOK1OTD8C2Kv6i4Rx3+CrFaeop31u4=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.c1d94599dfba50177fa1ce6c9614afc98b4a1d9ac3b2b6aa39853b7bf77f4c36.js integrity="sha256-wdlFmd+6UBd/oc5slhSvyYtKHZrDsraqOYU7e/d/TDY=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Toniebox Hacking</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</a></label><ul></ul></li></ul><ul><li><a href=/docs/how-to-get-started/>How to get started?</a><ul></ul></li><li><a href=/docs/faq/>Frequently Asked Questions</a><ul></ul></li><li><a href=/docs/tools/>Tools</a><ul><li><a href=/docs/tools/teddybench/>teddyBench</a><ul></ul></li><li><input type=checkbox id=section-a95e960a612f8fbab37aea668df2b6d5 class=toggle>
<label for=section-a95e960a612f8fbab37aea668df2b6d5 class="flex justify-between"><a href=/docs/tools/teddycloud/>teddyCloud</a></label><ul><li><input type=checkbox id=section-08589f4fa7088ff9815adcc05e7aacc4 class=toggle>
<label for=section-08589f4fa7088ff9815adcc05e7aacc4 class="flex justify-between"><a href=/docs/tools/teddycloud/dump-certs/>Dump certificates</a></label><ul><li><a href=/docs/tools/teddycloud/dump-certs/cc3200/>CC3200</a></li><li><a href=/docs/tools/teddycloud/dump-certs/cc3235/>CC3235</a></li><li><a href=/docs/tools/teddycloud/dump-certs/esp32/>ESP32</a></li></ul></li><li><input type=checkbox id=section-f141aff7b6c9b4dfa1b48a14e77b8d99 class=toggle>
<label for=section-f141aff7b6c9b4dfa1b48a14e77b8d99 class="flex justify-between"><a href=/docs/tools/teddycloud/flash-ca/>Flash replacement CA</a></label><ul><li><a href=/docs/tools/teddycloud/flash-ca/cc3200/>CC3200</a></li><li><a href=/docs/tools/teddycloud/flash-ca/cc3235/>CC3235</a></li><li><a href=/docs/tools/teddycloud/flash-ca/esp32/>ESP32</a></li></ul></li><li><input type=checkbox id=section-19ec87583f488bf9fe81a32d62ca8659 class=toggle>
<label for=section-19ec87583f488bf9fe81a32d62ca8659 class="flex justify-between"><a href=/docs/tools/teddycloud/dns/>DNS</a></label><ul><li><a href=/docs/tools/teddycloud/dns/cc3200/>CC3200</a></li><li><a href=/docs/tools/teddycloud/dns/cc3235/>CC3235</a></li><li><a href=/docs/tools/teddycloud/dns/esp32/>ESP32</a></li></ul></li><li><input type=checkbox id=section-777ee17ab29162f7ffb97fb14771f7d4 class=toggle>
<label for=section-777ee17ab29162f7ffb97fb14771f7d4 class="flex justify-between"><a href=/docs/tools/teddycloud/error-codes/>Error codes</a></label></li><li><input type=checkbox id=section-9f0001a565c93857a56ba24a115b4214 class=toggle>
<label for=section-9f0001a565c93857a56ba24a115b4214 class="flex justify-between"><a href=/docs/tools/teddycloud/test-troubleshooting/>Test & Troubleshooting</a></label></li></ul></li></ul></li><li><a href=/docs/box-variants/>Box Variants</a><ul><li><a href=/docs/box-variants/cc3200/>CC3200</a></li><li><a href=/docs/box-variants/cc3235/>CC3235</a></li><li><a href=/docs/box-variants/esp32/>ESP32</a></li></ul></li><li><a href=/docs/custom-firmware/>Custom Firmware</a><ul><li><input type=checkbox id=section-42e43c8e420eed49ce3d0915aa7a0f11 class=toggle checked>
<label for=section-42e43c8e420eed49ce3d0915aa7a0f11 class="flex justify-between"><a href=/docs/custom-firmware/cc3200/>CC3200</a></label><ul><li><input type=checkbox id=section-fb4cb61a40d81e2312fca285b90fac32 class=toggle checked>
<label for=section-fb4cb61a40d81e2312fca285b90fac32 class="flex justify-between"><a href=/docs/custom-firmware/cc3200/hackieboxng-bl/>HackieboxNG Bootloader</a></label><ul><li><a href=/docs/custom-firmware/cc3200/hackieboxng-bl/install/ class=active>Installation</a></li><li><a href=/docs/custom-firmware/cc3200/hackieboxng-bl/bootloader/>Bootloader</a></li><li><a href=/docs/custom-firmware/cc3200/hackieboxng-bl/ofw-patches/>Firmware patches</a></li></ul></li><li><input type=checkbox id=section-e6b6fb6492df9b2143f091c829117a9d class=toggle>
<label for=section-e6b6fb6492df9b2143f091c829117a9d class="flex justify-between"><a href=/docs/custom-firmware/cc3200/hackiebox-cfw/>Hackiebox CFW PoC</a></label><ul><li><a href=/docs/custom-firmware/cc3200/hackiebox-cfw/api/>Hackiebox API</a></li></ul></li></ul></li><li><input type=checkbox id=section-96fc9f3b17ed6977851c210f7d13b6ef class=toggle>
<label for=section-96fc9f3b17ed6977851c210f7d13b6ef class="flex justify-between"><a href=/docs/custom-firmware/esp32/>ESP32</a></label><ul><li><a href=/docs/custom-firmware/esp32/teddybox/>TeddyBox CFW</a><ul></ul></li></ul></li></ul></li><li><a href=/docs/wiki/>Wiki</a><ul><li><input type=checkbox id=section-d8f00f9faa706cfd8232ca710ec83905 class=toggle>
<label for=section-d8f00f9faa706cfd8232ca710ec83905 class="flex justify-between"><a role=button>CC3200</a></label><ul><li><a href=/docs/wiki/cc3200/boot-process/>Boot Process</a></li><li><a href=/docs/wiki/cc3200/debug-port/>Debug port</a></li><li><a href=/docs/wiki/cc3200/firmware-layout/>Firmware layout</a></li><li><a href=/docs/wiki/cc3200/firmware-list/>Firmware list</a></li><li><a href=/docs/wiki/cc3200/hardware/>Hardware</a></li><li><a href=/docs/wiki/cc3200/microsd-compatibility/>microSD compatibility</a></li><li><a href=/docs/wiki/cc3200/pinout/>Pinout</a></li></ul></li><li><input type=checkbox id=section-67f43499674643a099dd84c6cb56579b class=toggle>
<label for=section-67f43499674643a099dd84c6cb56579b class="flex justify-between"><a role=button>ESP32</a></label><ul><li><a href=/docs/wiki/esp32/pinout/>Pinout</a></li></ul></li><li><input type=checkbox id=section-682231c8b0ba39c29d77ab65a2a7a682 class=toggle>
<label for=section-682231c8b0ba39c29d77ab65a2a7a682 class="flex justify-between"><a role=button>General</a></label><ul><li><a href=/docs/wiki/general/audio-file-format/>Audio file format</a></li><li><a href=/docs/wiki/general/battery-power-supply/>Battery & Power supply</a></li><li><a href=/docs/wiki/general/internal-audio-files/>Internal audio files</a></li><li><a href=/docs/wiki/general/known-problems/>Known problems</a></li><li><a href=/docs/wiki/general/protocol-analysis/>Protocol analysis</a></li><li><a href=/docs/wiki/general/traffic-sniffing/>Traffic sniffing</a></li><li><a href=/docs/wiki/general/useful-links/>Useful links</a></li></ul></li></ul></li></ul><ul><li><a href target=_blank rel=noopener>More</a><ul><li><a href=https://github.com/toniebox-reverse-engineering target=_blank rel=noopener>GitHub</a></li><li><a href=https://t.me/toniebox_reverse_engineering target=_blank rel=noopener>Telegram Chat</a></li><li><a href=https://forum.revvox.de/ target=_blank rel=noopener>Discourse Forum</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Installation</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#backup>Backup</a></li><li><a href=#hackieboxng-bootloader>HackieboxNG Bootloader</a><ul><li><a href=#get-the-bootloader>Get the bootloader</a></li><li><a href=#preface>Preface</a></li><li><a href=#1a-preloader-stage-1---for-first-time-installation>1a) Preloader (Stage 1) - For first time installation</a></li><li><a href=#1b-preloader-stage-1---for-updating-the-sd-bootloader>1b) Preloader (Stage 1) - For updating the sd bootloader</a></li><li><a href=#2-bootloader-stage-2>2) Bootloader (Stage 2)</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=hackieboxng-installation>HackieboxNG Installation
<a class=anchor href=#hackieboxng-installation>#</a></h1><h2 id=backup>Backup
<a class=anchor href=#backup>#</a></h2><p>Please make a <strong>full file based + flash backup</strong> of your toniebox&rsquo;s flash with <a href=https://github.com/toniebox-reverse-engineering/cc3200tool>cc3200tool</a>.
<a href=https://toniebox-reverse-engineering.github.io/docs/wiki/cc3200/debug-port/>More details on the usage of the cc3200tool and the required hardware can be found here</a>
<em>Python 3 is needed!</em> You may use a different COM port or the right device on linux ex. /dev/ttyUSB0.</p><pre tabindex=0><code>cc3200tool -p COM3 read_all_files targetdir/ read_flash backup.bin
</code></pre><p>Please check, if you dumped every <a href=https://toniebox-reverse-engineering.github.io/docs/wiki/cc3200/firmware-layout/#important-toniebox-firmware-files>important file</a>.</p><h2 id=hackieboxng-bootloader>HackieboxNG Bootloader
<a class=anchor href=#hackieboxng-bootloader>#</a></h2><h3 id=get-the-bootloader>Get the bootloader
<a class=anchor href=#get-the-bootloader>#</a></h3><p>Download the latest version from <a href=https://github.com/toniebox-reverse-engineering/hackiebox_cfw_ng/releases>here</a>. Please unzip the release to your desired directory.
You will find a directory called flash there for the file(s) that need to be copied to the flash and a directory called sd for the sd files.
If you don&rsquo;t mind a slightly slower boot but want some log output via UART (Baud 921600, TX Pin) use the debug variant (check the ngCfg.json to enable it!).</p><h3 id=preface>Preface
<a class=anchor href=#preface>#</a></h3><p>If you have previously installed the CFW SD Bootloader please use <em>1b)</em> otherwise for first time installation please use <em>1a)</em>.</p><h3 id=1a-preloader-stage-1---for-first-time-installation>1a) Preloader (Stage 1) - For first time installation
<a class=anchor href=#1a-preloader-stage-1---for-first-time-installation>#</a></h3><h4 id=move-original-bootloader>Move original bootloader
<a class=anchor href=#move-original-bootloader>#</a></h4><p>First of all you need to copy your just backuped original mcuimg.bin (original bootloader) from your toniebox to a different location (flash:/sys/pre-img.bin) to boot it with the HackieboxNG Bootloader later on.
Please don&rsquo;t confuse the mcuimg.bin (ofw bootloader) you are going to dump with the mcuimg.bin within the hackiebox zip package. (/flash/sys/mcuimg.bin)</p><pre tabindex=0><code>cc3200tool -p COM3 read_file /sys/mcuimg.bin mcuimg.bin
cc3200tool -p COM3 write_file mcuimg.bin /sys/pre-img.bin
</code></pre><h4 id=install-preloader>Install preloader
<a class=anchor href=#install-preloader>#</a></h4><pre tabindex=0><code>cc3200tool -p COM3 write_file flash/sys/mcuimg.bin /sys/mcuimg.bin
</code></pre><h4 id=or-as-oneliner>Or as oneliner
<a class=anchor href=#or-as-oneliner>#</a></h4><pre tabindex=0><code>cc3200tool -p COM3 read_file /sys/mcuimg.bin mcuimg.bin write_file mcuimg.bin /sys/pre-img.bin write_file flash/sys/mcuimg.bin /sys/mcuimg.bin
</code></pre><h4 id=dumping-the-original-firmware>Dumping the original firmware
<a class=anchor href=#dumping-the-original-firmware>#</a></h4><p>The box saves up to 3 different versions of the OFW. It can be found flash:/sys/mcuimgN.bin (replace N with 1, 2 or 3). A command to dump all three versions would be:</p><pre tabindex=0><code>cc3200tool -p COM3 read_file /sys/mcuimg1.bin mcuimg1.bin read_file /sys/mcuimg2.bin mcuimg2.bin read_file /sys/mcuimg3.bin mcuimg3.bin
</code></pre><p>To check which version the dumped firmwares are you may just open it with a hex editor (quite at the end) or use our <a href=https://github.com/toniebox-reverse-engineering/toniebox/blob/master/tools/firmware_info.py>python tool</a> to extract it. If you found a new firmware, let us know by opening a push request for <a href=https://toniebox-reverse-engineering.github.io/docs/wiki/cc3200/firmware-list/>our known firmware listing</a> in the wiki.</p><h3 id=1b-preloader-stage-1---for-updating-the-sd-bootloader>1b) Preloader (Stage 1) - For updating the sd bootloader
<a class=anchor href=#1b-preloader-stage-1---for-updating-the-sd-bootloader>#</a></h3><p>You may use the (old) Hackiebox CFW to upload the preloader. This way you can install it over the air without direct access to the flash if you have already installed a previous version of the cfw bootloader/preloader. Just run the Hackiebox CFW and use the webinterface to upload the new /sys/mcuimg.bin.</p><h4 id=backup-1>Backup
<a class=anchor href=#backup-1>#</a></h4><p>To verify that you have currently installed the ofw bootloader to <em>/sys/pre-img.bin</em> you may download the file from flash</p><pre tabindex=0><code>http://*.*.*.*/api/ajax?cmd=get-flash-file&amp;filepath=/sys/pre-img.bin
</code></pre><h4 id=copy-over-preloader>Copy over preloader
<a class=anchor href=#copy-over-preloader>#</a></h4><p><img src=/img/InstallCfwFlashUpload.png alt="CFW Flash upload"></p><ol><li>Select <em>Target</em> &ldquo;Flash&rdquo;</li><li>Select <em>Local file</em> &ldquo;flash/sys/mcuimg.bin&rdquo;</li><li>Set <em>Overwrite</em> to &ldquo;on&rdquo;</li><li>Set <em>SD/Flash path</em> to &ldquo;/sys/mcuimg.bin&rdquo;</li><li>Press <em>Upload</em>!</li></ol><h4 id=verification>Verification
<a class=anchor href=#verification>#</a></h4><p>To verify that the upload was successful you can download the mcuimg.bin from flash afterwards and compare it with the <em>flash/sys/mcuimg.bin</em> you have just uploaded.</p><pre tabindex=0><code>http://*.*.*.*/api/ajax?cmd=get-flash-file&amp;filepath=/sys/mcuimg.bin
</code></pre><h3 id=2-bootloader-stage-2>2) Bootloader (Stage 2)
<a class=anchor href=#2-bootloader-stage-2>#</a></h3><h4 id=sd-files>SD files
<a class=anchor href=#sd-files>#</a></h4><p>Copy over all the contents of the <em>sd</em> folder the sd card of the toniebox.
Copy over the original bootloader (mcuimg.bin from your backup) to the first ofw slot <em>sd:/revvox/boot/ng-ofw1.bin</em>.
Now the HackieboxNG bootloader will instantly boot the original bootloader and run the original firmware.</p><p>Note: The preloader will load any file placed to <em>sd:/revvox/boot/ngbootloader.bin</em>.</p><p><a href=../bootloader>More about the different firmware slots and the configuration here.</a></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/toniebox-reverse-engineering/toniebox-reverse-engineering.github.io/commit/737ec783163356341cde7ab3d85f9734db5c4d52 title='Last modified by SciLor | 2024-01-09' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>2024-01-09</span></a></div><div><a class="flex align-center" href=https://github.com/toniebox-reverse-engineering/toniebox-reverse-engineering.github.io/edit/master/content/docs/custom-firmware/cc3200/hackieboxng-bl/install.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#backup>Backup</a></li><li><a href=#hackieboxng-bootloader>HackieboxNG Bootloader</a><ul><li><a href=#get-the-bootloader>Get the bootloader</a></li><li><a href=#preface>Preface</a></li><li><a href=#1a-preloader-stage-1---for-first-time-installation>1a) Preloader (Stage 1) - For first time installation</a></li><li><a href=#1b-preloader-stage-1---for-updating-the-sd-bootloader>1b) Preloader (Stage 1) - For updating the sd bootloader</a></li><li><a href=#2-bootloader-stage-2>2) Bootloader (Stage 2)</a></li></ul></li></ul></nav></div></aside></main></body></html>